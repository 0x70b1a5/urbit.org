+++
title = "Cryptography"
weight = 50
template = "doc.html"
+++

Cryptography is central to the operation of Urbit. This section gives an
overview of where cryptographic methods are utilized in Arvo, Azimuth, and Vere,
what they are, and how they are implemented.

This document does not describe any algorithmic details of cryptographic
functions, only how they are utilized. This document also does not yet cover
hashing - see [Insecure Hashing](@/docs/hoon/reference/stdlib/2e.md) and [SHA
Hash Family](@/docs/reference/stdlib/3d.md) for reference material on hash
functions in the standard library.

## Summary

There are two categories of keys and five parts of the system involved with
cryptography on Urbit. We summarize each component here briefly, and then
continue with a more detailed exposition below.

### Types of keys

The two categories of keys are your Azimuth/Ethereum keys and your networking
keys. In both cases, these are public/private key pairs utilized for public key
cryptography.

#### Azimuth keys

Your Urbit ID exists as an ERC-721 non-fungible token on the Ethereum
blockchain, and as such is contained in a wallet whose private key you possess.
If you are are utilizing a [master
ticket](@/docs/azimuth/azimuth.md#master-ticket), this private key is derived
from a seed, which is what you use to login to
[Bridge](@/docs/glossary/bridge.md). Otherwise, you have generated the key by
some other process, of which there are too many to list here. Besides the
private key which unlocks your ownership wallet address, you may have a few
other private keys which unlock a wallet that corresponds to your ship's
[proxies](@/docs/glossary/proxies.md). We refer collectively to these keys as
your _Azimuth keys_.

Only [planets](@/docs/glossary/planet.md), [stars](@/docs/glossary/star.md), and
[galaxies](@/docs/glossary/galaxy.md) have Azimuth keys.
[Moons](@/docs/glossary/moon.md) and [comets](@/docs/glossary/comet.md) do not,
as they do not utilize the Ethereum blockchain.

It is important to note that no Azimuth keys are stored anywhere within your
ship's [pier](@/docs/glossary/pier.md) - Ethereum and Urbit ID are entirely
separate entities from Urbit itself, and so you lose access to your Azimuth
private keys there is no way to retrieve them somehow from your ship.

For more information on the usage of these keys and the associated proxies, see
the [Azimuth documentation](@/docs/azimuth/azimuth.md).

#### Networking keys

All communications in Urbit over the [Ames](@/docs/glossary/ames.md) are
end-to-end encrypted, and thus your ship stores a public/private pair of
_networking keys_ utilized to manage that encryption. Networking keys for all
ship types are stored within the ship's Jael vane (see the following section).

For planets, stars, and galaxies, your private networking key is a
necessary input (the [keyfile](@/docs/glossary/keyfile.md)) for the initial boot
sequence of your ship (sometime called its `%dawn`). The associated public key
is then uploaded to the Ethereum blockchain using one of your Azimuth private
keys - either the one associated to the wallet which owns the ship, or the one
which holds the management proxy.

For moons, the private networking key is generated by the parent ship and
injected into the `%dawn` sequence for the moon, and its public key is stored by
the parent in its Jael vane. Moon networking keys may be changed by the parent
ship, but not by the moon itself.

For comets, their 128-bit `@p` name is actually their public key, and the
"mining" process to generate a comet consists of guessing a private key for
which the associated public key has a galaxy that has already been pre-assigned
to assist its peer discovery process. Thus, comets cannot change their
networking keys - to get a new private networking key, a new comet must be
generated.

### System components

[Ames](@/docs/arvo/ames/ames.md) is Arvo's networking vane. All packets sent by
Ames are encrypted utilizing a cryptosuite found in `zuse`. The only exception
to this are comet self-attestation packets utilized to transmit their public
key. Ames is responsible for encryption and decryption of all packets. By
default, this utilizes AES symmetric key encryption, whose shared private key is
got by elliptic curve Diffie-Hellman key exchange.

`zuse` is the Hoon standard library. It contains cryptographic primitives which
are utilized by Ames. All cryptographic primitives are
[jetted](@/docs/vere/jetting.md) in Vere with standard vetted implementations of
cryptographic libraries.

[Vere](@/docs/vere/_index.md) is Urbit's Nock runtime system, written in C.
Correct implementation of cryptographic libraries is difficult, and so all
cryptographic primitives implemented in Hoon actually hinted to the interpreter
to run vetted cryptographic libraries reviewed by experts instead.

[Jael](@/docs/arvo/jael/jael-api.md) is primarily utilized for the safe storage
of private keys and retrieval of public keys utilized by Ames. The Jael vane of
a planet is responsible for distributing the public keys of its moons
(ultimately via Ames), while the Jael vane of a comet is responsible for
distributing its own public key (also ultimately via Ames).

[Azimuth](@/docs/azimuth/_index.md) is Urbit's Ethereum-based public key
infrastructure. `azimuth-tracker` obtains networking public keys for planets,
stars, and galaxies from this store, which are then stored in Jael and utilized
by Ames for end-to-end encrypted communication. It is important to note that the
private keys which generate the wallet that holds ownership of your Urbit ID and
its proxies are not stored anywhere on your ship.



